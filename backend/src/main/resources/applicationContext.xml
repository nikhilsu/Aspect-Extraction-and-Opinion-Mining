<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

    <bean id="propertyPlaceholderConfigurer"
          class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="locations">
            <list>
                <value>classpath:kafka.producer.properties</value>
                <value>classpath:kafka.consumer.properties</value>
                <value>classpath:kafka.properties</value>
            </list>
        </property>
    </bean>


    <bean id="kafkaService" class="edu.bigData.sparkBusters.service.KafkaServiceImpl">
        <constructor-arg index="0" ref="producer"/>
        <constructor-arg index="1" ref="consumer"/>
    </bean>

    <bean id="producer" class="org.apache.kafka.clients.producer.KafkaProducer">
        <constructor-arg type="java.util.Map">
            <map>
                <entry key="bootstrap.servers" value="${bootstrap.servers}"/>
                <entry key="acks" value="${acks}"/>
                <entry key="retries" value="${retries}"/>
                <entry key="batch.size" value="${batch.size}"/>
                <entry key="linger.ms" value="${linger.ms}"/>
                <entry key="buffer.memory" value="${buffer.memory}"/>
                <entry key="key.serializer" value="${key.serializer}"/>
                <entry key="value.serializer" value="${value.serializer}"/>
            </map>
        </constructor-arg>
    </bean>

    <bean id="consumer" class="org.apache.kafka.clients.consumer.KafkaConsumer">
        <constructor-arg type="java.util.Map">
            <map>
                <entry key="bootstrap.servers" value="${bootstrap.servers}"/>
                <entry key="group.id" value="${group.id}"/>
                <entry key="enable.auto.commit" value="${enable.auto.commit}"/>
                <entry key="session.timeout.ms" value="${session.timeout.ms}"/>
                <entry key="key.serializer" value="${key.serializer}"/>
                <entry key="value.serializer" value="${value.serializer}"/>
            </map>
        </constructor-arg>
    </bean>


</beans>